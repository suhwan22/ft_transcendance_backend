<html>

<head>

</head>

<body>
  <div>
    channelId: <input id="channel" type="text" />
    <button onclick="enter()">enter room</button>
  </div>
  <div>
    userId: <input id="user" type="text" />
  </div>
  <div>
    <input id="message" type="text" />
    <button onclick="send()">send test</button>
  </div>
  <script src="https://cdn.socket.io/4.3.2/socket.io.min.js"
    integrity="sha384-KAZ4DtjNhLChOB/hxXuKqhMLYvx3b5MlT55xPEiNmREKRzeEm+RVPlTnAn0ajQNs"
    crossorigin="anonymous"></script>
  <script>
    const channel = document.getElementById('channel');
    const user = document.getElementById('user');
    const message = document.getElementById('message');
    const socket = io('http://localhost:3131');
    socket.on('users', function (data) {
      console.log('Connected', data);
    });
    socket.on('sendMessage', async function (data) {
      console.log(await data);
    });
    socket.on('getMessage', function (data) {
      console.log(data);
    })
    function send() {
      socket.emit('sendMessage', { userId: parseInt(user.value), channelId: parseInt(channel.value), content: message.value });
      message.value = null;
    }
    function enter() {
      socket.emit('enterChatRoom', { userId: parseInt(user.value), channelId: parseInt(channel.value) });
    }
  </script>
</body>

</html>